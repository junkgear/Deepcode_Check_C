static int handle_satn(ESPState *s)
{
    uint8_t buf[32];
    int len;

    if (s->dma && !s->dma_enabled) {
        s->dma_cb = handle_satn;
        return 1;
    }
    len = get_cmd(s, buf);
    if (len)
        do_cmd(s, buf);
	return 1;
}